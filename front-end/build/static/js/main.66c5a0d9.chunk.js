(this["webpackJsonptoday-tix-question"]=this["webpackJsonptoday-tix-question"]||[]).push([[0],{30:function(t,e,n){},49:function(t,e,n){},51:function(t,e,n){},52:function(t,e,n){"use strict";n.r(e);var a=n(2),s=n.n(a),c=n(22),i=n.n(c),r=(n(30),n(5)),o=n(24),l=n(23),u=n(7),h=n(8),d=n(9),j=n(10),b=n(13),m=n.n(b),f=n(11),p=n.n(f),O=n(25),v=function(t){Object(d.a)(n,t);var e=Object(j.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"sum",value:function(t){return this.reduce((function(e,n){return e+(n[t]||0)}),0)}}]),n}(Object(O.a)(Array)),g=n.p+"static/media/tomorrow-tix.e383f92e.svg",x=(n(49),n(0)),y=function(t){Object(d.a)(n,t);var e=Object(j.a)(n);function n(){var t;return Object(u.a)(this,n),(t=e.call(this)).componentDidMount=function(){t.getLotteryEntrants()},t.handleChange=function(e){var n=e.target,a=n.name,s=n.value;t.setState(Object(l.a)({},a,s))},t.submit=function(e){e.preventDefault();var n={name:t.state.name,ticketRequest:t.state.ticketRequest};m()({url:"http://localhost:3000/api/save",method:"POST",data:n}).then((function(){console.log("Data has been sent to the server"),t.resetUserInputs(),t.getLotteryEntrants()})).catch((function(){console.log("Internal server error")}))},t.resetUserInputs=function(){t.setState({name:"",ticketRequest:0})},t.getLotteryEntrants=function(){m.a.get("/api").then((function(e){var n=e.data;t.setState({entrants:n}),console.log("data has been recieved")})).catch((function(t){console.log(t)}))},t.shuffle=function(t){for(var e,n,a=t.length;0!==a;)n=Math.floor(Math.random()*a),e=t[a-=1],t[a]=t[n],t[n]=e;return t},t.lotteryResults=function(){var e=t.state.ticketAllocation/t.state.entrants[0].ticketRequest,n=t.shuffle(t.state.entrants),a=n.slice(0,e);console.log(n);var s=Object(r.a)(v,Object(o.a)(a)).sum("ticketRequest");t.setState({draw:!0,ticketAllocation:t.state.ticketAllocation-s,winners:a,hide:!0})},t.displayWinner=function(){if(!0===t.state.hide&&(p()(".form-group").hide(),p()("#button").hide(),p()("#results").hide()),!0===t.state.draw)return Object(x.jsxs)("div",{className:"showResults",children:[Object(x.jsx)("h1",{children:"The draw has been completed"}),Object(x.jsx)("h3",{children:"The winners are..."}),t.state.winners.map((function(t){var e=t.name,n=t._id;return Object(x.jsx)("h4",{className:"winners",children:e},n)})),Object(x.jsx)("h3",{children:"Congratulations to you all, enjoy your show!"})]})},t.state={name:"",ticketRequest:0,entrants:[],winners:[],ticketAllocation:10,minTicketAllocation:0,draw:!1,hide:!1},t}return Object(h.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("div",{className:"wrapper",children:[Object(x.jsx)("img",{src:g,alt:"",className:"header-img"}),Object(x.jsxs)("form",{className:"form-group",onSubmit:this.submit,children:[Object(x.jsx)("input",{type:"text",className:"form-control",name:"name",placeholder:"What's your name?",value:this.state.name,onChange:this.handleChange}),Object(x.jsxs)("select",{className:"form-control",name:"ticketRequest",placeholder:"quantity",value:this.state.ticketRequest,onChange:this.handleChange,children:[Object(x.jsx)("option",{value:0,children:"How Many Tickets?"}),Object(x.jsx)("option",{value:2,children:"2"})]}),Object(x.jsx)("button",{className:"btn btn-outline-secondary",id:"button",children:"Submit"})]}),Object(x.jsx)("button",{className:"btn btn-outline-dark",id:"results",onClick:this.lotteryResults,children:"Lottery Results"}),Object(x.jsx)("div",{children:this.displayWinner()})]})}}]),n}(s.a.Component);n(51);var k=function(){return Object(x.jsx)("div",{className:"App",children:Object(x.jsx)(y,{})})},w=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,53)).then((function(e){var n=e.getCLS,a=e.getFID,s=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),a(t),s(t),c(t),i(t)}))};i.a.render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsx)(k,{})}),document.getElementById("root")),w()}},[[52,1,2]]]);
//# sourceMappingURL=main.66c5a0d9.chunk.js.map